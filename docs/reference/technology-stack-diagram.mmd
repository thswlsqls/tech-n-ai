%%{init: {'theme':'base', 'themeVariables': {'primaryColor':'#f0f9ff', 'primaryTextColor':'#0c4a6e', 'primaryBorderColor':'#0284c7', 'lineColor':'#0ea5e9', 'secondaryColor':'#7dd3fc', 'tertiaryColor':'#bae6fd'}}}%%
graph TB
    subgraph "Application Framework Layer"
        JAVA[Java 21]
        SPRING_BOOT[Spring Boot 4.0.1]
        SPRING_CLOUD[Spring Cloud 2025.1.0]
        GRADLE[Gradle<br/>Groovy DSL]
    end

    subgraph "Data Access Layer"
        JPA[Spring Data JPA<br/>Hibernate 7.2.0]
        MYBATIS[MyBatis 4.0.1<br/>복잡한 조회 전용]
        MONGO_DATA[Spring Data MongoDB]
    end

    subgraph "Command Side Database"
        AURORA_DB[(Amazon Aurora MySQL 3.x<br/>MySQL 8.0+ 호환<br/>TSID Primary Key<br/>높은 정규화 3NF)]
    end

    subgraph "Query Side Database"
        MONGO_DB[(MongoDB Atlas 7.0+<br/>읽기 최적화<br/>비정규화 구조<br/>ESR 인덱스)]
    end

    subgraph "Messaging & Event Streaming"
        KAFKA[Apache Kafka<br/>이벤트 기반 동기화<br/>Partition Key 기반 순서 보장]
        KAFKA_STREAMS[Kafka Streams]
    end

    subgraph "Caching & Session"
        REDIS_CACHE[(Redis<br/>캐싱<br/>세션 관리<br/>멱등성 보장)]
    end

    subgraph "Security & Authentication"
        SPRING_SECURITY[Spring Security 6.x<br/>JWT 인증]
        JWT[jjwt<br/>JWT 토큰]
        OAUTH2[OAuth 2.0 Client<br/>Google, GitHub, Kakao, Naver]
        BCRYPT[BCrypt<br/>비밀번호 암호화]
    end

    subgraph "Batch Processing"
        SPRING_BATCH[Spring Batch<br/>정보 출처 업데이트]
        SPRING_AI[Spring AI<br/>Anthropic Claude]
    end

    subgraph "API Documentation"
        REST_DOCS[Spring REST Docs<br/>테스트 기반 문서화]
        ASCIIDOCTOR[Asciidoctor 4.0.5<br/>문서 변환]
    end

    subgraph "External Integration"
        FEIGN_CLIENT[OpenFeign<br/>외부 API 클라이언트]
        RSS_PARSER[RSS Parser<br/>Rome 라이브러리]
        WEB_SCRAPER[Web Scraper<br/>Jsoup, Selenium]
        SLACK_CLIENT[Slack Client<br/>Webhook, Bot API]
    end

    subgraph "Monitoring & Observability"
        ACTUATOR[Spring Boot Actuator<br/>헬스 체크]
        PROMETHEUS[Micrometer Prometheus<br/>메트릭 수집]
        OPENTELEMETRY[OpenTelemetry<br/>분산 추적]
    end

    %% Framework dependencies
    JAVA --> SPRING_BOOT
    SPRING_BOOT --> SPRING_CLOUD
    GRADLE --> SPRING_BOOT

    %% Data Access dependencies
    SPRING_BOOT --> JPA
    SPRING_BOOT --> MYBATIS
    SPRING_BOOT --> MONGO_DATA
    JPA --> AURORA_DB
    MYBATIS --> AURORA_DB
    MONGO_DATA --> MONGO_DB

    %% Messaging dependencies
    SPRING_BOOT --> KAFKA
    KAFKA --> KAFKA_STREAMS

    %% Caching dependencies
    SPRING_BOOT --> REDIS_CACHE

    %% Security dependencies
    SPRING_BOOT --> SPRING_SECURITY
    SPRING_SECURITY --> JWT
    SPRING_SECURITY --> OAUTH2
    SPRING_SECURITY --> BCRYPT

    %% Batch dependencies
    SPRING_BOOT --> SPRING_BATCH
    SPRING_BATCH --> SPRING_AI

    %% Documentation dependencies
    SPRING_BOOT --> REST_DOCS
    REST_DOCS --> ASCIIDOCTOR

    %% External integration dependencies
    SPRING_BOOT --> FEIGN_CLIENT
    SPRING_BOOT --> RSS_PARSER
    SPRING_BOOT --> WEB_SCRAPER
    SPRING_BOOT --> SLACK_CLIENT

    %% Monitoring dependencies
    SPRING_BOOT --> ACTUATOR
    ACTUATOR --> PROMETHEUS
    SPRING_BOOT --> OPENTELEMETRY

    %% Styling
    style JAVA fill:#eff6ff,stroke:#1e3a8a,stroke-width:2px,color:#1e3a8a
    style SPRING_BOOT fill:#eff6ff,stroke:#1e3a8a,stroke-width:2px,color:#1e3a8a
    style AURORA_DB fill:#eff6ff,stroke:#1e3a8a,stroke-width:3px,color:#1e3a8a
    style MONGO_DB fill:#f0fdf4,stroke:#166534,stroke-width:3px,color:#166534
    style KAFKA fill:#fef3c7,stroke:#d97706,stroke-width:3px,color:#92400e
    style REDIS_CACHE fill:#fee2e2,stroke:#dc2626,stroke-width:2px,color:#991b1b
    style SPRING_SECURITY fill:#e0e7ff,stroke:#6366f1,stroke-width:2px,color:#312e81
    style SPRING_BATCH fill:#f3e8ff,stroke:#9333ea,stroke-width:2px,color:#581c87



