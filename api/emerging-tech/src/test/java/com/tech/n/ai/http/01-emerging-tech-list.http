###
# GET /api/v1/emerging-tech - Emerging Tech 목록 조회 API 테스트
# Description: Emerging Tech 목록을 필터 및 페이지네이션으로 조회합니다.
# Authentication: Not Required (Public)
# @no-cookie-jar
###

### 1. 기본 목록 조회 (기본 파라미터)
GET {{gatewayUrl}}/api/v1/emerging-tech?page=1&size=20

> {%
    client.test("목록 조회 성공", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
        client.assert(response.body.code === "2000", "응답 코드가 2000이어야 합니다");
    });

    client.test("페이지네이션 응답 확인", function() {
        var data = response.body.data;
        client.assert(data.items !== undefined, "items가 존재해야 합니다");
        client.assert(data.pageSize !== undefined, "pageSize가 존재해야 합니다");
        client.assert(data.pageNumber !== undefined, "pageNumber가 존재해야 합니다");
        client.assert(data.totalCount !== undefined, "totalCount가 존재해야 합니다");
    });

    // 첫 번째 항목 ID 저장
    client.test("테스트 데이터 저장", function() {
        var data = response.body.data;
        if (data.items && data.items.length > 0) {
            client.global.set("testEmergingTechId", data.items[0].id);
        }
    });
%}

### 2. 페이지네이션 - 두 번째 페이지
GET {{gatewayUrl}}/api/v1/emerging-tech?page=2&size=5

> {%
    client.test("두 번째 페이지 조회 성공", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
        client.assert(response.body.code === "2000", "응답 코드가 2000이어야 합니다");
    });

    client.test("페이지 크기 확인", function() {
        var data = response.body.data;
        client.assert(data.pageSize === 5, "pageSize가 5여야 합니다");
        client.assert(data.pageNumber === 2, "pageNumber가 2여야 합니다");
    });
%}

### 3. 페이지네이션 - 큰 페이지 번호 (빈 결과)
GET {{gatewayUrl}}/api/v1/emerging-tech?page=9999&size=20

> {%
    client.test("빈 페이지 조회 성공", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
    });

    client.test("빈 결과 확인", function() {
        var data = response.body.data;
        client.assert(data.items.length === 0, "결과가 비어있어야 합니다");
    });
%}

### 4. 페이지네이션 - 최소 페이지 크기
GET {{gatewayUrl}}/api/v1/emerging-tech?page=1&size=1

> {%
    client.test("최소 페이지 크기 조회 성공", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
    });
%}

### 5. 페이지네이션 - 최대 페이지 크기 (100)
GET {{gatewayUrl}}/api/v1/emerging-tech?page=1&size=100

> {%
    client.test("최대 페이지 크기 조회 성공", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
    });

    client.test("pageSize가 100 이하 확인", function() {
        var data = response.body.data;
        client.assert(data.pageSize <= 100, "pageSize가 100 이하여야 합니다");
    });
%}

### 6. 필터 - provider별 조회
GET {{gatewayUrl}}/api/v1/emerging-tech?page=1&size=20&provider=ANTHROPIC

> {%
    client.test("provider 필터 조회 성공", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
    });

    client.test("provider 필터 결과 확인", function() {
        var data = response.body.data;
        if (data.items && data.items.length > 0) {
            client.assert(data.items[0].provider === "ANTHROPIC", "provider가 ANTHROPIC이어야 합니다");
        }
    });
%}

### 7. 필터 - updateType별 조회
GET {{gatewayUrl}}/api/v1/emerging-tech?page=1&size=20&updateType=SDK_RELEASE

> {%
    client.test("updateType 필터 조회 성공", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
    });
%}

### 8. 필터 - status별 조회
GET {{gatewayUrl}}/api/v1/emerging-tech?page=1&size=20&status=DRAFT

> {%
    client.test("status 필터 조회 성공", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
    });

    client.test("status 필터 결과 확인", function() {
        var data = response.body.data;
        if (data.items && data.items.length > 0) {
            client.assert(data.items[0].status === "DRAFT", "status가 DRAFT여야 합니다");
        }
    });
%}

### 9. 필터 - 복합 필터 (provider + status)
GET {{gatewayUrl}}/api/v1/emerging-tech?page=1&size=20&provider=ANTHROPIC&status=DRAFT

> {%
    client.test("복합 필터 조회 성공", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
    });
%}

### 10. 정렬 - publishedAt 오름차순
GET {{gatewayUrl}}/api/v1/emerging-tech?page=1&size=20&sort=publishedAt,asc

> {%
    client.test("정렬 조회 성공", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
    });
%}

### 11. 정렬 - createdAt 내림차순
GET {{gatewayUrl}}/api/v1/emerging-tech?page=1&size=20&sort=createdAt,desc

> {%
    client.test("createdAt 정렬 조회 성공", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
    });
%}

### 12. 엣지 케이스 - page=0 (최소값 미만)
GET {{gatewayUrl}}/api/v1/emerging-tech?page=0&size=20

> {%
    client.test("page 최소값 미만 - 400 반환", function() {
        client.assert(response.status === 400, "응답 상태 코드가 400이어야 합니다");
    });
%}

### 13. 엣지 케이스 - size=0 (최소값 미만)
GET {{gatewayUrl}}/api/v1/emerging-tech?page=1&size=0

> {%
    client.test("size 최소값 미만 - 400 반환", function() {
        client.assert(response.status === 400, "응답 상태 코드가 400이어야 합니다");
    });
%}

### 14. 엣지 케이스 - size=101 (최대값 초과)
GET {{gatewayUrl}}/api/v1/emerging-tech?page=1&size=101

> {%
    client.test("size 최대값 초과 - 400 반환", function() {
        client.assert(response.status === 400, "응답 상태 코드가 400이어야 합니다");
    });
%}

### 15. 엣지 케이스 - 존재하지 않는 provider 값
GET {{gatewayUrl}}/api/v1/emerging-tech?page=1&size=20&provider=INVALID_PROVIDER

> {%
    client.test("잘못된 provider 값 - 400 반환", function() {
        client.assert(response.status === 400, "응답 상태 코드가 400이어야 합니다");
    });
%}

### 16. 엣지 케이스 - 파라미터 없이 요청 (기본값 적용)
GET {{gatewayUrl}}/api/v1/emerging-tech

> {%
    client.test("파라미터 없이 요청 - 기본값 적용 200 반환", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
    });
%}
