###
# GET /api/v1/bookmark/deleted - 삭제된 북마크 목록 조회 API 테스트
# Description: 삭제된 북마크 목록을 페이지네이션으로 조회합니다.
# Authentication: Required (Bearer Token)
###

### 1. 기본 삭제 목록 조회 (기본 파라미터)
GET {{gatewayUrl}}/api/v1/bookmark/deleted
Authorization: Bearer {{accessToken}}

> {%
    client.test("삭제된 북마크 목록 조회 성공", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
        client.assert(response.body.code === "2000", "code 필드가 2000이어야 합니다");
    });

    client.test("페이지네이션 응답 확인", function() {
        var data = response.body.data;
        client.assert(data.data !== undefined, "PageData가 존재해야 합니다");
    });
%}

### 2. days 필터링 - 최근 7일
GET {{gatewayUrl}}/api/v1/bookmark/deleted?days=7
Authorization: Bearer {{accessToken}}

> {%
    client.test("7일 필터 조회 성공", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
    });
%}

### 3. 페이지네이션 - 커스텀 page/size
GET {{gatewayUrl}}/api/v1/bookmark/deleted?page=1&size=5
Authorization: Bearer {{accessToken}}

> {%
    client.test("페이지네이션 성공", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
    });
%}

### 4. 페이지네이션 - 큰 페이지 번호 (빈 결과)
GET {{gatewayUrl}}/api/v1/bookmark/deleted?page=100&size=10
Authorization: Bearer {{accessToken}}

> {%
    client.test("빈 페이지 조회 성공", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
    });

    client.test("빈 결과 확인", function() {
        var data = response.body.data;
        client.assert(data.data.list.length === 0, "결과가 비어있어야 합니다");
    });
%}

### 5. 실패 케이스 - 인증 없이 요청
GET {{gatewayUrl}}/api/v1/bookmark/deleted

> {%
    client.test("인증 필요 오류", function() {
        client.assert(response.status === 401, "응답 상태 코드가 401이어야 합니다");
    });
%}

### 6. 실패 케이스 - 잘못된 토큰
GET {{gatewayUrl}}/api/v1/bookmark/deleted
Authorization: Bearer invalid_token_here

> {%
    client.test("인증 실패 오류", function() {
        client.assert(response.status === 401, "응답 상태 코드가 401이어야 합니다");
    });
%}

### 7. 실패 케이스 - 잘못된 page 파라미터 (0)
GET {{gatewayUrl}}/api/v1/bookmark/deleted?page=0&size=10
Authorization: Bearer {{accessToken}}

> {%
    client.test("파라미터 검증 실패", function() {
        client.assert(response.status === 400, "응답 상태 코드가 400이어야 합니다");
        client.assert(response.body.code === "4006", "code 필드가 4006(VALIDATION_ERROR)이어야 합니다");
    });
%}

### 8. 실패 케이스 - 잘못된 size 파라미터 (0)
GET {{gatewayUrl}}/api/v1/bookmark/deleted?page=1&size=0
Authorization: Bearer {{accessToken}}

> {%
    client.test("파라미터 검증 실패", function() {
        client.assert(response.status === 400, "응답 상태 코드가 400이어야 합니다");
        client.assert(response.body.code === "4006", "code 필드가 4006(VALIDATION_ERROR)이어야 합니다");
    });
%}
