###
# GET /api/v1/bookmark/{id} - 북마크 상세 조회 API 테스트
# Description: 특정 북마크의 상세 정보를 조회합니다.
# Authentication: Required (Bearer Token)
###

### 1. 북마크 상세 조회 성공
GET {{gatewayUrl}}/api/v1/bookmark/{{testBookmarkId}}
Authorization: Bearer {{accessToken}}

> {%
    client.test("북마크 상세 조회 성공", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
        client.assert(response.body.code === "2000", "code 필드가 2000이어야 합니다");
    });

    client.test("북마크 상세 데이터 확인", function() {
        var data = response.body.data;
        client.assert(data.bookmarkTsid !== undefined, "bookmarkTsid가 존재해야 합니다");
        client.assert(data.emergingTechId !== undefined, "emergingTechId가 존재해야 합니다");
        client.assert(data.title !== undefined, "title이 존재해야 합니다");
        client.assert(data.url !== undefined, "url이 존재해야 합니다");
        client.assert(data.provider !== undefined, "provider가 존재해야 합니다");
        client.assert(data.createdAt !== undefined, "createdAt이 존재해야 합니다");
        client.assert(Array.isArray(data.tags), "tags가 배열이어야 합니다");
    });
%}

### 2. 실패 케이스 - 잘못된 ID 형식 (비숫자)
GET {{gatewayUrl}}/api/v1/bookmark/non-existent-id-12345
Authorization: Bearer {{accessToken}}

> {%
    client.test("잘못된 ID 형식 오류", function() {
        client.assert(response.status === 400, "응답 상태 코드가 400이어야 합니다");
        client.assert(response.body.code === "4006", "code 필드가 4006(VALIDATION_ERROR)이어야 합니다");
    });
%}

### 3. 실패 케이스 - 존재하지 않는 북마크 ID (유효한 숫자 형식)
GET {{gatewayUrl}}/api/v1/bookmark/999999999999999999
Authorization: Bearer {{accessToken}}

> {%
    client.test("북마크 없음 오류", function() {
        client.assert(response.status === 404, "응답 상태 코드가 404이어야 합니다");
        client.assert(response.body.code === "4004", "code 필드가 4004(NOT_FOUND)이어야 합니다");
    });
%}

### 4. 실패 케이스 - 인증 없이 요청
GET {{gatewayUrl}}/api/v1/bookmark/{{testBookmarkId}}

> {%
    client.test("인증 필요 오류", function() {
        client.assert(response.status === 401, "응답 상태 코드가 401이어야 합니다");
    });
%}

### 5. 실패 케이스 - 잘못된 토큰
GET {{gatewayUrl}}/api/v1/bookmark/{{testBookmarkId}}
Authorization: Bearer invalid_token_here

> {%
    client.test("인증 실패 오류", function() {
        client.assert(response.status === 401, "응답 상태 코드가 401이어야 합니다");
    });
%}

### 6. 실패 케이스 - 다른 사용자의 북마크 조회 (비숫자 ID)
GET {{gatewayUrl}}/api/v1/bookmark/other-user-bookmark-id
Authorization: Bearer {{accessToken}}

> {%
    client.test("잘못된 ID 형식 오류", function() {
        client.assert(response.status === 400, "응답 상태 코드가 400이어야 합니다");
        client.assert(response.body.code === "4006", "code 필드가 4006(VALIDATION_ERROR)이어야 합니다");
    });
%}
