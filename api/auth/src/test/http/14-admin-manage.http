###
# 관리자 계정 관리 API 테스트
# Description: 목록 조회, 상세 조회, 수정, 삭제
# Authentication: Required (Bearer Token, ADMIN role)
# @no-cookie-jar
###

### 1. 관리자 목록 조회 성공
GET {{gatewayUrl}}/api/v1/auth/admin/accounts
Authorization: Bearer {{adminAccessToken}}

> {%
    client.test("관리자 목록 조회 성공", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
        client.assert(response.body.code === "2000", "code 필드가 2000이어야 합니다");
        client.assert(Array.isArray(response.body.data), "data가 배열이어야 합니다");
    });
%}

### 2. 관리자 상세 조회 성공
GET {{gatewayUrl}}/api/v1/auth/admin/accounts/{{testAdminId}}
Authorization: Bearer {{adminAccessToken}}

> {%
    client.test("관리자 상세 조회 성공", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
        client.assert(response.body.data.role === "ADMIN", "role이 ADMIN이어야 합니다");
    });
%}

### 3. 관리자 정보 수정 성공
PUT {{gatewayUrl}}/api/v1/auth/admin/accounts/{{testAdminId}}
Content-Type: application/json
Authorization: Bearer {{adminAccessToken}}

{
  "username": "systme-admin"
}

> {%
    client.test("관리자 수정 성공", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
        client.assert(response.body.data.username === "updatedadmin", "username이 수정되어야 합니다");
    });
%}

### 4. 관리자 삭제 성공
DELETE {{gatewayUrl}}/api/v1/auth/admin/accounts/{{testAdminId}}
Authorization: Bearer {{adminAccessToken}}

> {%
    client.test("관리자 삭제 성공", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
    });
%}

### 5. 실패 케이스 - 일반 사용자로 목록 조회
GET {{gatewayUrl}}/api/v1/auth/admin/accounts
Authorization: Bearer {{accessToken}}

> {%
    client.test("권한 없음 오류", function() {
        client.assert(response.status === 403, "응답 상태 코드가 403이어야 합니다");
    });
%}

### 6. 실패 케이스 - 존재하지 않는 관리자 조회
GET {{gatewayUrl}}/api/v1/auth/admin/accounts/999999
Authorization: Bearer {{adminAccessToken}}

> {%
    client.test("관리자 미존재 오류", function() {
        client.assert(response.status === 404, "응답 상태 코드가 404이어야 합니다");
        client.assert(response.body.code === "4004", "code 필드가 4004(NOT_FOUND)이어야 합니다");
    });
%}
