###
# POST /api/v1/auth/reset-password - 비밀번호 재설정 요청 API 테스트
# Description: 이메일로 비밀번호 재설정 링크 전송 요청
###

### 1. 정상적인 비밀번호 재설정 요청
POST {{baseUrl}}/api/v1/auth/reset-password
Content-Type: application/json

{
  "email": "{{testEmail}}"
}

> {%
    client.test("비밀번호 재설정 요청 성공", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
        client.assert(response.body.success === true, "success 필드가 true여야 합니다");
    });
%}

### 2. 다른 사용자 비밀번호 재설정 요청
POST {{baseUrl}}/api/v1/auth/reset-password
Content-Type: application/json

{
  "email": "john.doe@example.com"
}

> {%
    client.test("요청 성공", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
    });
%}

### 3. 실패 케이스 - 이메일 누락
POST {{baseUrl}}/api/v1/auth/reset-password
Content-Type: application/json

{
}

> {%
    client.test("유효성 검증 실패", function() {
        client.assert(response.status === 400, "응답 상태 코드가 400이어야 합니다");
    });
%}

### 4. 실패 케이스 - 빈 이메일
POST {{baseUrl}}/api/v1/auth/reset-password
Content-Type: application/json

{
  "email": ""
}

> {%
    client.test("유효성 검증 실패", function() {
        client.assert(response.status === 400, "응답 상태 코드가 400이어야 합니다");
    });
%}

### 5. 실패 케이스 - 잘못된 이메일 형식
POST {{baseUrl}}/api/v1/auth/reset-password
Content-Type: application/json

{
  "email": "invalid-email"
}

> {%
    client.test("유효성 검증 실패", function() {
        client.assert(response.status === 400, "응답 상태 코드가 400이어야 합니다");
    });
%}

### 6. 존재하지 않는 이메일 (보안상 성공 응답 반환 가능)
POST {{baseUrl}}/api/v1/auth/reset-password
Content-Type: application/json

{
  "email": "notexist@example.com"
}

> {%
    client.test("요청 처리 완료", function() {
        client.assert(response.status === 200, "보안상 200 응답을 반환해야 합니다");
    });
%}

###
# 사용 방법:
# 1. 비밀번호 재설정 요청 실행
# 2. 이메일에서 비밀번호 재설정 링크 확인
# 3. 링크에서 token 추출
# 4. http-client.private.env.json의 resetPasswordToken에 저장
# 5. 다음 단계(07-reset-password-confirm.http)에서 사용
#
# 토큰 저장 예시 (http-client.private.env.json):
# {
#   "local": {
#     "resetPasswordToken": "your-reset-token-here"
#   }
# }
