###
# POST /api/v1/auth/signup - 회원가입 API 테스트
# Description: 이메일, 사용자명, 비밀번호로 회원가입
###

### 1. 정상적인 회원가입
POST {{baseUrl}}/api/v1/auth/signup
Content-Type: application/json

{
  "email": "{{testEmail}}",
  "username": "{{testUsername}}",
  "password": "{{testPassword}}"
}

> {%
    client.test("회원가입 성공", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
        client.assert(response.body.code === "2000", "code 필드가 2000이어야 합니다");
    });
    
    client.test("회원가입 응답 데이터 확인", function() {
        var data = response.body.data;
        client.assert(data.userId !== undefined, "userId가 존재해야 합니다");
        client.assert(data.email === "{{testEmail}}", "이메일이 일치해야 합니다");
    });
%}

### 2. 다른 사용자 회원가입
POST {{baseUrl}}/api/v1/auth/signup
Content-Type: application/json

{
  "email": "ebson022@gmail.com",
  "username": "testuser3",
  "password": "Password123#"
}

> {%
    client.test("회원가입 성공", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
    });
%}

### 3. 비밀번호 최소 조건 (8자, 영문+숫자)
POST {{baseUrl}}/api/v1/auth/signup
Content-Type: application/json

{
  "email": "minimum@example.com",
  "username": "minuser",
  "password": "Pass1234"
}

> {%
    client.test("회원가입 성공", function() {
        client.assert(response.status === 200, "응답 상태 코드가 200이어야 합니다");
    });
%}

### 4. 실패 케이스 - 이메일 누락
POST {{baseUrl}}/api/v1/auth/signup
Content-Type: application/json

{
  "username": "testuser",
  "password": "Password123!"
}

> {%
    client.test("유효성 검증 실패", function() {
        client.assert(response.status === 400, "응답 상태 코드가 400이어야 합니다");
    });
%}

### 5. 실패 케이스 - 잘못된 이메일 형식
POST {{baseUrl}}/api/v1/auth/signup
Content-Type: application/json

{
  "email": "invalid-email",
  "username": "testuser",
  "password": "Password123!"
}

> {%
    client.test("유효성 검증 실패", function() {
        client.assert(response.status === 400, "응답 상태 코드가 400이어야 합니다");
    });
%}

### 6. 실패 케이스 - 사용자명 너무 짧음 (3자 미만)
POST {{baseUrl}}/api/v1/auth/signup
Content-Type: application/json

{
  "email": "test@example.com",
  "username": "ab",
  "password": "Password123!"
}

> {%
    client.test("유효성 검증 실패", function() {
        client.assert(response.status === 400, "응답 상태 코드가 400이어야 합니다");
    });
%}

### 7. 실패 케이스 - 비밀번호 너무 짧음 (8자 미만)
POST {{baseUrl}}/api/v1/auth/signup
Content-Type: application/json

{
  "email": "test@example.com",
  "username": "testuser",
  "password": "Pass1"
}

> {%
    client.test("유효성 검증 실패", function() {
        client.assert(response.status === 400, "응답 상태 코드가 400이어야 합니다");
    });
%}

### 8. 실패 케이스 - 비밀번호 패턴 불일치 (영문만)
POST {{baseUrl}}/api/v1/auth/signup
Content-Type: application/json

{
  "email": "test@example.com",
  "username": "testuser",
  "password": "PasswordOnly"
}

> {%
    client.test("유효성 검증 실패", function() {
        client.assert(response.status === 400, "응답 상태 코드가 400이어야 합니다");
    });
%}

### 9. 실패 케이스 - 이미 가입된 이메일
POST {{baseUrl}}/api/v1/auth/signup
Content-Type: application/json

{
  "email": "{{testEmail}}",
  "username": "duplicateuser",
  "password": "Password123!"
}

> {%
    client.test("중복 이메일 오류", function() {
        client.assert(response.status === 409 || response.status === 400, "응답 상태 코드가 409 또는 400이어야 합니다");
    });
%}
